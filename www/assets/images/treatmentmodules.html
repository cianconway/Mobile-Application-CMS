<html>
	<head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8">

<title>Moodbuster</title>
<link href="css/layout.css" rel="stylesheet" type="text/css" media="all">

<link href="css/layout.css" rel="stylesheet" type="text/css" media="all">

<script type="text/javascript">






// TOUCH-EVENTS SINGLE-FINGER SWIPE-SENSING JAVASCRIPT
//Courtesy of PADILICIOUS.COM and MACOSXAUTOMATION.COM

//this script can be used with one or more page elements to perform actions based on them being swiped with a single finger

var triggerElementID = null; // this variable is used to identity the triggering element
var fingerCount = 0;
var startX = 0;
var startY = 0;
var curX = 0;
var curY = 0;
var deltaX = 0;
var deltaY = 0;
var horzDiff = 0;
var vertDiff = 0;
var minLength = 72; // the shortest distance the user may swipe
var swipeLength = 0;
var swipeAngle = null;
var swipeDirection = null;


//The 4 Touch Event Handlers

//NOTE: the touchStart handler should also receive the ID of the triggering element
//make sure its ID is passed in the event call placed in the element declaration, like:

function touchStart(event,passedName) {
//disable the standard ability to select the touched object
//event.preventDefault();
//get the total number of fingers touching the screen
fingerCount = event.touches.length;
//since we're looking for a swipe (single finger) and not a gesture (multiple fingers),
//check that only one finger was used
if ( fingerCount == 1 ) {

document.getElementById('greenleftarrow').style.display="block";
//get the coordinates of the touch
startX = event.touches[0].pageX;
startY = event.touches[0].pageY;
//store the triggering element ID
triggerElementID = passedName;
} else {
//more than one finger touched so cancel
touchCancel(event);
}
}

function touchMove(event) {
event.preventDefault();
if ( event.touches.length == 1 ) {
curX = event.touches[0].pageX;
curY = event.touches[0].pageY;
} else {
touchCancel(event);
}
}

function touchEnd(event) {

document.getElementById('greenleftarrow').style.display="none";
event.preventDefault();
//check to see if more than one finger was used and that there is an ending coordinate
if ( fingerCount == 1 && curX != 0 ) {
//use the Distance Formula to determine the length of the swipe
swipeLength = Math.round(Math.sqrt(Math.pow(curX - startX,2) + Math.pow(curY - startY,2)));
//if the user swiped more than the minimum length, perform the appropriate action
if ( swipeLength >= minLength ) {
caluculateAngle();
determineSwipeDirection();
processingRoutine();
touchCancel(event); // reset the variables
} else {
touchCancel(event);
}
} else {
touchCancel(event);
}
}

function touchCancel(event) {
//reset the variables back to default values
fingerCount = 0;
startX = 0;
startY = 0;
curX = 0;
curY = 0;
deltaX = 0;
deltaY = 0;
horzDiff = 0;
vertDiff = 0;
swipeLength = 0;
swipeAngle = null;
swipeDirection = null;
triggerElementID = null;
}

function caluculateAngle() {
var X = startX-curX;
var Y = curY-startY;
var Z = Math.round(Math.sqrt(Math.pow(X,2)+Math.pow(Y,2))); //the distance - rounded - in pixels
var r = Math.atan2(Y,X); //angle in radians (Cartesian system)
swipeAngle = Math.round(r*180/Math.PI); //angle in degrees
if ( swipeAngle < 0 ) { swipeAngle =  360 - Math.abs(swipeAngle); }
}function determineSwipeDirection() {
    if ( (swipeAngle <= 45) && (swipeAngle >= 0) ) {
    swipeDirection = 'left';
    } else if ( (swipeAngle <= 360) && (swipeAngle >= 315) ) {
    swipeDirection = 'left';
    } else if ( (swipeAngle >= 135) && (swipeAngle <= 225) ) {
    swipeDirection = 'right';
    }  else if ( (swipeAngle > 45) && (swipeAngle < 135) ) {
    swipeDirection = 'down';
    //window.scroll(0,480); // horizontal and vertical scroll targets
    var elem = document.getElementById("swipeBox");
    var x = 0;
    var y = 0;
    while (elem != null) {
    x += elem.offsetLeft;
    y += elem.offsetTop;
    elem = elem.offsetParent;
    }
    window.scrollTo(x, y);

    } else {
    swipeDirection = 'up';
    //window.scroll(0,-480); // horizontal and vertical scroll targets

    }
    }


function updateButtonView() {
//replace with pageid, if > 1 display else ignore, no popup on this page
var toast = "19815d";
//Android.showToast("19815d", toast);

var buttonName = new String;
var buttonLink = new String();
buttonLink[0]="javascript:window.location.href='ict4d_212_21031.html?lang=en';";
buttonLink[1]="javascript:window.location.href='ict4d_210_20813.html?lang=en';";
buttonLink[2]="javascript:window.location.href='ict4d_204_19917.html?lang=en';";
buttonLink[3]="javascript:window.location.href='ict4d_205_20782.html?lang=en';";
buttonLink[4]="#";
buttonLink[5]="javascript:window.location.href='ict4d_227_26267.html?lang=en';";
var moduleCode = new Array();
moduleCode[0] = "PEM";
moduleCode[1] = "PST";
moduleCode[2] = "CRT";
moduleCode[3] = "BA";
moduleCode[4] = "RP";
moduleCode[5] = "ET";


for(var i=0; i<moduleCode.length; i++) {
	var ModulePermissions = Android.returnModuleStatus(i).toString();
	var Rating = Android.returnStarRating(i).toString();
	var rateID = 'RATING'+moduleCode[i]+lang;
	buttonName = moduleCode[i]+lang;
	idName = 'BG'+moduleCode[i]+lang;

	if (ModulePermissions==1) {

		//Android.showToast("19815d", buttonName);
		document.getElementById(buttonName).style.color="#38627c";
		document.getElementById(buttonName).style.textDecoration="none";
		document.getElementById(buttonName).href = buttonLink[i];


		var RatingString = Rating+"%";
		document.getElementById(rateID).style.width=RatingString;


	} else {
		document.getElementById(buttonName).style.color="#aaaaaa";
		document.getElementById(buttonName).style.textDecoration="line-through";
		document.getElementById(buttonName).href = "#";

		//hide rating
		document.getElementById(rateID).style.display='none';
		document.getElementById(idName).style.display = 'none';
	}


}




toast = "done";
//Android.showToast("19815d", toast);

}



function showAndroidToast(toast) {
//replace with pageid, if > 1 display else ignore, no popup on this page
Android.showToast("19508", toast);
}


function displayAlert() {
window.location.href='index.html?lang='+lang;
//Android.displayAlert("home");
}
var lang = 'en';
function inspectLang(){
	lang = document.URL;

	if(lang.indexOf("lang=nl")>0){
   //toggle dutch
	lang='nl';
	document.getElementById("en").style.display = 'none';
	document.getElementById("nl").style.display = 'block';
   // remove for se - document.getElementById("se").style.display = 'none';

   }else if(lang.indexOf("lang=se")>0){
	   //toggle swedish
	   lang='se';
	   document.getElementById("en").style.display = 'none';
	   document.getElementById("nl").style.display = 'none';
	   // remove for se - document.getElementById("se").style.display = 'block';

   }else if(lang.indexOf("lang=en")>0){
	   //toggle english
	   lang='en';
	   document.getElementById("en").style.display = 'block';
	   document.getElementById("nl").style.display = 'none';
	  //document.getElementById("se").style.display = 'none';
   }else{
   		var lang1 = Android.getLang();
   		window.location.href=lang+'?lang='+lang1;
   }
}

function displayAlert1() {
Android.displayAlert("calendar");
}

function navigate(url){
	window.location.href=url+'?lang='+lang;
}

function getDocHeight(){
    var documentBody = document.getElementById('w1').offsetHeight;
    var windowHeight = window.innerHeight;

    if(documentBody>510){
    }else{
        document.getElementById('footer').style.position="absolute";
        document.getElementById('footer').style.bottom="0";
    }
}

//file content from server
fileContent = Android.returnFileContent("treatmentmodules").toString();
</script>
	</head>
	<body onload="javascript: inspectLang(); updateButtonView(); getDocHeight();">
		<div id="swipeBox" ontouchstart="touchStart(event,'swipeBox');"  ontouchend="touchEnd(event);" ontouchmove="touchMove(event);" ontouchcancel="touchCancel(event);" style="position:relative;width:100%;height:100%;">
		<div id="header">
    	<a href="#" onclick="javascript:displayAlert();"><h1 class="logo"><img src="images/logo.png" width=45 height=45 /></h1></a>
        <div class="page_title"></div>
  		<ul class="top-right">
  		<li><a href="#" title="Help" onclick="javascript:window.location.href='help.html';"><img src="images/help.png" width="50" height="50" alt="Help"></a></li>
        <li><a href="#" title="Calendar" onclick="javascript:displayAlert1();"><img src="images/icon_cal.png" width="30" height="40" alt="Calendar"></a></li>
        <li><a href="javascript:window.location.href='exercises.html';" title="Exercise Section"><img src="images/icon_diary.png" width="30" height="40" alt="Exercise Section"></a></li>
            <li><a href="javascript:window.location.href='index.html';" title="Go up one level"><img src="images/icon_levelup.png" width="30" height="40" alt="Go up one level"></a></li>
        </ul>
    	</div>

<div id="content">


<div id="en" style="display: block;">
      <div id="main_col">
        <ul id="mainMenu">
            <li><a id="PEMen" href="" >Psycho Education  <div id="BGPEMen" class="rating_bar" style="position: absolute; top:80%;">
  <div id="RATINGPEMen" style="position: relative;"> </div> </div> </a> </li>
            <li><a id="PSTen" href=""><span class="txt">Problem Solving</span>	<div id="BGPSTen" class="rating_bar" style="position: absolute; top:80%;">
  <div id="RATINGPSTen" style="position: relative; width:10%"> </div> </div>  </a>
</li>
            <li><a id="CRTen" href=""><span class="txt">Cognitive Restruct-<br/>uring</span>  <div id = "BGCRTen" class="rating_bar" style="position: absolute; top:80%;">
  <div id="RATINGCRTen" style="position: relative;"> </div> </div>  </a></li>
            <li><a id="BAen" href=""><span class="txt">Behavioral Activation</span> <div id="BGBAen" class="rating_bar" style="position: absolute; top:80%;">
  <div id="RATINGBAen" style="position: relative;"> </div> </div>  </a></li>
            <li><a id="RPen" href=""><span class="txt"">Relapse Prevention</span> <div id ="BGRPen" class="rating_bar" style="position: absolute; top:80%;">
  <div id="RATINGRPen" style="position: relative;"> </div> </div>  </a></li>
            <li><a id="ETen" href=""><span class="txt">Exercise</span> <div id="BGETen" class="rating_bar" style="position: absolute; top:80%;">
  <div id="RATINGETen" style="position: relative;"> </div> </div>  </a></li>
        </ul>
       </div>
</div>
<!-- end en -->
<div id="nl" style="display: none;">
<div id="main_col">
  <ul id="mainMenu">
  	<li><a id="PEMnl" href="" >Psycho-Educatie <div id="BGPEMnl" class="rating_bar" style="position: absolute; top:80%;">
  <div id="RATINGPEMnl" style="position: relative;"> </div> </div>
</a></li>

      <li><a id="PSTnl" href=""><span class="txt" >Problemen Oplossen</span>
<div id="BGPSTnl" class="rating_bar" style="position: absolute; top:80%;">
  <div id="RATINGPSTnl" style="position: relative;"> </div> </div>
</a></li>
      <li><a id="CRTnl" href=""><span class="txt">Cognitieve Therapie</span>
<div id="BGCRTnl" class="rating_bar" style="position: absolute; top:80%;">
  <div id="RATINGCRTnl" style="position: relative;"> </div> </div>

</a></li>
      <li><a id="BAnl" href=""><span class="txt">Plezierige Activiteiten</span>
<div id="BGBAnl" class="rating_bar" style="position: absolute; top:80%;">
  <div id="RATINGBAnl" style="position: relative;"> </div> </div>

</a></li>
      <li><a id="RPnl" href=""><span class="txt" >Relapse Prevention</span>
<div id="BGRPnl" class="rating_bar" style="position: absolute; top:80%;">
  <div id="RATINGRPnl" style="position: relative;"> </div> </div>

</a></li>
      <li><a id="ETnl" href=""><span class="txt" >Bewegen</span>
<div id="BGETnl" class="rating_bar" style="position: absolute; top:80%;">
  <div id="RATINGETnl" style="position: relative;"> </div> </div>

</a></li>
  </ul>
 </div>
</div>
<!-- end nl -->
<div id="se" style="display: none;">
<div id="main_col">
  <ul id="mainMenu">
  	<li><a href="" style="text-decoration: line-through; color: #aaaaaa;">Psycho Education <div id="BGPEMse" class="rating_bar" style="position: absolute; top:80%;">
  <div id="RATINGPEMse" style="position: relative;"> </div> </div>
 </a> </li>
      <li><a href=""><span class="txt" style="text-decoration: line-through; color: #aaaaaa;" style="text-decoration: line-through; color: #aaaaaa;">Problem Solving</span>
<div id="BGPSTse" class="rating_bar" style="position: absolute; top:80%;">
  <div id="RATINGPSTse" style="position: relative;"> </div> </div>
</a></li>
      <li><a href=""><span class="txt" style="text-decoration: line-through; color: #aaaaaa;">Cognitive Restruct-<br/>uring</span>
<div id="BGCRTse" class="rating_bar" style="position: absolute; top:80%;">
  <div id="RATINGCRTse" style="position: relative;"> </div> </div>
</a></li>
      <li><a href=""><span class="txt">Behavioral Activation</span>
<div id="BGBAse" class="rating_bar" style="position: absolute; top:80%;">
  <div id="RATINGBAse" style="position: relative;"> </div> </div>
</a></li>
      <li><a href=""><span class="txt" style="text-decoration: line-through; color: #aaaaaa;">Relapse Prevention</span>
<div id="BGRPse" class="rating_bar" style="position: absolute; top:80%;">
  <div id="RATINGRPse" style="position: relative;"> </div> </div>
</a></li>
      <li><a href=""><span class="txt" style="text-decoration: line-through; color: #aaaaaa;">Exercise</span>
<div id="BGPETse" class="rating_bar" style="position: absolute; top:80%;">
  <div id="RATINGETse" style="position: relative;"> </div> </div>
</a></li>
  </ul>
 </div>
</div>
<!-- end se -->

    </div>

   <!-- <div id="footer" style=" position: fixed; bottom: 0px; width: 340px; height: 40px; background:#fff url(./images/body_bg.gif) repeat-x;">&nbsp;</div>
		</div>-->
	</body>
</html>
